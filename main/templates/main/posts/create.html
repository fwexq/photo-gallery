{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+SC:wght@300;400;500;600;700&family=Indie+Flower&display=swap" rel="stylesheet">

<link rel="stylesheet" href="{% static 'main/css/posts/create.css' %}">

<head>
    <title>Создание поста</title>
</head>
{% block body %}
<div class="album py-5 bg-light black ">
    <button type="button" class="btn btn-light"><a href="/">Back</a></button>
    <br><br>

    <form action="{% url 'posts_create' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ post_form }}

        <input type="file" id="real-file" hidden="hidden" />
        <button type="button" id="custom-button">Choose a file</button>
        <span id="custom-text">No file chosen, yet</span>
        <script type="text/javascript">
            const realFileBtn = document.getElementById("real-file");
            const customBtn = document.getElementById("custom-button");
            const customTxt = document.getElementById("custom-text");

            customBtn.addEventListener("click", function() {
                realFileBtn.click();
            });

            realFileBtn.addEventListener("change", function() {
                if (realFileBtn.value) {
                    customTxt.innerHTML = realFileBtn.value.match(
                        /[\/\\]([\w\d\s\.\-\(\)]+)$/
                    )[1];
                } else {
                    customTxt.innerHTML = "No file chosen, yet.";
                }
            });
        </script>
        <button type="submit" class="btn-n btn-light-create-form">Suggest post</button>
    </form>

</div>

{% if messages %}
{% for message in messages %}
<p {% if message.tags %} class="{{ message.tags }}" {% endif %}><i class="fa-solid fa-circle-check"></i> {{ message }}</p>
{% endfor %}
{% endif %}

</form>
{% endblock %}